/**
 * This file auto-generated by Fern from our API Definition.
 */

import { FinixApi } from "../../..";
import * as core from "../../../core";
import * as serializers from "../..";

export const Identity: core.schemas.Schema<Identity.Raw, FinixApi.identities.Identity> = core.schemas
  .union("type", {
    merchant: core.schemas.lazyObject(() => serializers.identities.MerchantResponse),
    buyer: core.schemas.lazyObject(() => serializers.identities.BuyerResponse),
    associated: core.schemas.lazyObject(() => serializers.identities.AssociatedResponse),
  })
  .transform<FinixApi.identities.Identity>({
    parse: (value) => {
      switch (value.type) {
        case "merchant": {
          return FinixApi.identities.Identity.merchant(value);
        }
        case "buyer": {
          return FinixApi.identities.Identity.buyer(value);
        }
        case "associated": {
          return FinixApi.identities.Identity.associated(value);
        }
        default: {
          return {
            ...(value as any),
            _visit: (visitor) => visitor._other(value),
          };
        }
      }
    },
    json: (value) => value as any,
  });

export declare namespace Identity {
  type Raw = Identity.Merchant | Identity.Buyer | Identity.Associated;

  interface Merchant extends serializers.identities.MerchantResponse.Raw {
    type: "merchant";
  }

  interface Buyer extends serializers.identities.BuyerResponse.Raw {
    type: "buyer";
  }

  interface Associated extends serializers.identities.AssociatedResponse.Raw {
    type: "associated";
  }
}
